<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>js_iso demo</title>
	<script src="lib/jquery/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/grid.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/avatar.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/a_star.js" type="text/javascript" charset="utf-8"></script>
	
	<style type="text/css" media="screen">
	/*
		#board {
			position:relative;
			width:100%;
			height:100%;
		}
	*/
	
		div {
			/*
			border: solid 1px #8EA1B0;
			*/
			background-color:pink;
			width:25px;
			height:25px;
			/* padding:5px; */
			position:absolute;
			top:0;
			left:0;
			font: normal 9px Helvetica, sans-serif;
			color:#7C8D9A;
			display:block;
		}
		
		img {
			width:300px;
			height:300px;
		}
	</style>
	
</head>

<body>

<script type="text/javascript" charset="utf-8">
	var colors = ["#ECD078", "#53777A", "D95B43", "#C02942", "#542437"];
	var grid = new Grid(20,20);
	var pixel_size = 20;
	var zindexer = 0;
	var mode = "animated";
	var randomized_nodes = grid.nodes();
	
	function build_grid(x,y) {
		if (zindexer >= (grid.width() * grid.height())) {
			return true;
		}
		
		var id_string = 'x_' + x + '_y_' + y;
		var id = '#' + id_string;
		
		$('body').append('<div id="' + id_string + '"></div>');
		
		var color = colors.shift();
		colors.push(color);
		
		if (mode == 'animated') {
			$(id).css({
				'background-color': color,
				'z-index': zindexer + 100
			});
			
			$(id).animate({
				width: pixel_size + 'px',
				height: (pixel_size/2) + 'px',
				left: (x * pixel_size) + 'px',
				top: (y * (pixel_size/2)) + 'px'			
			}, 100, function() {
				if (randomized_nodes.length == 0) {
					return true;
				}

				var node = randomized_nodes.pop();
				zindexer += 1;
				build_grid(node[0],node[1]);
			});
		} else {
			$(id).css({
				'background-color': color,
				'z-index': zindexer + 100,
				'width': pixel_size + 'px',
				'height': pixel_size + 'px',
				'left': (x * pixel_size) + 'px',
				'top': (y * pixel_size) + 'px'
			});



			var node = randomized_nodes.pop();
			zindexer += 1;
			build_grid(node[0],node[1]);
		}
	}
	
	var node = randomized_nodes.pop();
	build_grid(node[0],node[1]);
</script>


</body>
</html>
